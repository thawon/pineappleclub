!function(){"use strict";angular.module("pineappleclub",["ui.router","breeze.angular","ngResource","ngProgress","ngCookies","pineappleclub.application","pineappleclub.home","pineappleclub.navigator","pineappleclub.contact","pineappleclub.photos","pineappleclub.header-client","pineappleclub.header-admin","pineappleclub.footer","pineappleclub.side-bar","pineappleclub.dashboard","pineappleclub.login","pineappleclub.user-profile","pineappleclub.authorisation-constant","pineappleclub.state-change-service","pineappleclub.auth-interceptor-service"]).config(["$locationProvider","$stateProvider","$urlRouterProvider","$httpProvider","AUTHORISATION",function(a,b,c,d,e){a.html5Mode({enabled:!0}),c.otherwise(e.STATES.otherwise),e.STATES.states.map(function(a){b.state(a.name,{url:a.url,templateUrl:a.templateUrl,controller:a.controller,data:a.data})}),d.interceptors.push("AuthInterceptor")}]).run(["$rootScope","StateChangeService","ngProgress",function(a,b,c){a.$on("$stateChangeStart",function(a,c){b.change(c.data.authorizedRoles)}),a.$on("$stateChangeSuccess",function(a,b){c.complete()})}])}(),function(){"use strict";function a(a,b,c,d){var e=this;e.setCurrentUser=function(a){d.setCurrentUser(a)},a.color(b.progress.color),c.authenticated().then(function(a){a.success&&e.setCurrentUser(c.getCurrentUser())})}angular.module("pineappleclub.application",["ngProgress","pineappleclub.app-configuration-service","pineappleclub.auth-service","pineappleclub.user-service"]).controller("ApplicationController",a),a.$inject=["ngProgress","AppConfigurationService","AuthService","UserService"]}(),function(){"use strict";function a(a,b){this.location=a,this.companyInfo=b.companyInfo}angular.module("pineappleclub.contact",["pineappleclub.app-configuration-service","pineappleclub.google-map-directive"]).controller("ContactController",a),a.$inject=["$location","AppConfigurationService"]}(),function(){"use strict";function a(){}angular.module("pineappleclub.dashboard",[]).controller("DashboardController",a),a.$inject=[]}(),function(){"use strict";function a(a){var b=this;b.menu=a.pages.about}angular.module("pineappleclub.footer",["pineappleclub.navigator-service"]).controller("FooterController",a),a.$inject=["NavigatorService"]}(),function(){"use strict";function a(a,b,c,d,e){var f=this;f.getCurrentUser=d.getCurrentUser,f.logout=function(){b.logout().then(function(b){d.setCurrentUser(null),a.$broadcast(e.logoutSuccess),c.changeState("signout")})}}angular.module("pineappleclub.header-admin",["pineappleclub.state-service","pineappleclub.user-service","pineappleclub.auth-service","pineappleclub.auth-events-constant"]).controller("HeaderAdminController",a),a.$inject=["$rootScope","AuthService","StateService","UserService","AUTH_EVENTS"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){h.banner=f.device.isBreakpoint(d.XS)?h.configs.IMG_SMALLBANNER:h.configs.IMG_BIGBANNER}var h=this;h.configs={IMG_BIGBANNER:"/images/tree-big.png",IMG_SMALLBANNER:"/images/tree-small.png"},e.addEventListener("resize",$.proxy(function(){a($.proxy(h.resize,h))},h),!1),b.$on("$stateChangeSuccess",function(a,b){var d=_.filter(c.STATES.states,function(a){return"login"===a.name||"signout"===a.name});h.isShown=_.find(b.data.authorizedRoles,function(a){return a===c.USER_ROLES.admin})||_.find(d,function(a){return a.name===b.name})?!1:!0}),h.isShown=!0,g()}angular.module("pineappleclub.header-client",["pineappleclub.authorisation-constant","pineappleclub.device-sizes-constant","pineappleclub.export-service","pineappleclub.util-service"]).controller("HeaderClientController",a),a.$inject=["$timeout","$rootScope","AUTHORISATION","DEVICE_SIZES","ExportService","UtilService"]}(),function(){"use strict";function a(){}angular.module("pineappleclub.home",[]).controller("HomeController",a),a.$inject=[]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){d.changeState("dashboard")}var i=this;i.credentials={email:g.empty,password:g.empty},i.errorMessage=null,i.login=function(b){c.login(b).then(function(b){var d=c.getCurrentUser();e.setCurrentUser(d),a.$broadcast(f.loginSuccess),h()})},a.$on(f.notAuthenticated,function(){i.errorMessage="The email or password you entered is incorrect."}),c.isAuthenticated()&&h()}angular.module("pineappleclub.login",["ngCookies","pineappleclub.auth-service","pineappleclub.state-service","pineappleclub.user-service","pineappleclub.auth-events-constant","pineappleclub.string-constant"]).controller("LoginController",a),a.$inject=["$rootScope","$cookieStore","AuthService","StateService","UserService","AUTH_EVENTS","STRING"]}(),function(){"use strict";function a(a,b){this.companyInfo=a.companyInfo,this.menu=b.pages.main,this.toggleSideBar=function(){$(".row-offcanvas").toggleClass("active")}}angular.module("pineappleclub.navigator",["pineappleclub.app-configuration-service","pineappleclub.navigator-service"]).controller("NavigatorController",a),a.$inject=["AppConfigurationService","NavigatorService"]}(),function(){"use strict";function a(a){var b=this;b.userId=a.googlePlusUserId}angular.module("pineappleclub.photos",["pineappleclub.app-configuration-service","pineappleclub.plus-gallery-directive"]).controller("PhotosController",a),a.$inject=["AppConfigurationService"]}(),function(){"use strict";function a(a,b){function c(){$(d.configs.ELE_SIDEBAR).toggleClass(d.configs.CONS_ACTIVE)}var d=this;d.configs={ELE_SIDEBAR:".row-offcanvas",CONS_ACTIVE:"active",CSS_SIDEBARSHOW:"side-bar-show",CSS_SIDEBARHIDE:"side-bar-hide"},d.project=a.companyInfo,d.menu=b.pages.main,d.toggleSideBar=$.proxy(c,d)}angular.module("pineappleclub.side-bar",["pineappleclub.app-configuration-service","pineappleclub.navigator-service","pineappleclub.device-height-directive"]).controller("SideBarController",a),a.$inject=["AppConfigurationService","NavigatorService"]}(),function(){"use strict";function a(){var a=this;a.updateFn=function(){console.log("A save here.")},a.updateFnB=function(){console.log("B save here.")},a.saveXX=function(){console.log("save here.")}}angular.module("pineappleclub.user-profile",[]).controller("UserProfileController",a),a.$inject=[]}(),function(){"use strict";function a(a){var b=this;b.user=null,a.getUsers().then(function(a){b.user=a}),b.updateFn=function(){a.save()},b.updateFnB=function(){console.log("B save here.")},b.saveXX=function(){console.log("save here.")}}angular.module("pineappleclub.user-profile",["pineappleclub.entity-detail-container","pineappleclub.expandable-container"]).controller("UserProfileController",a),a.$inject=["UserService"]}(),function(){"use strict";var a={loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",logoutFailed:"auth-logout-failed",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"};angular.module("pineappleclub.auth-events-constant",[]).constant("AUTH_EVENTS",a)}(),function(){"use strict";var a,b,c;a={admin:"admin",all:"*"},b={otherwise:"/",states:[{name:"home",url:"/",templateUrl:"scripts/components/home/home.html",controller:"HomeController as home",data:{authorizedRoles:[a.all],page:{title:"Child Care Service",description:"We provide high quality child care service supported by Integricare.The service is operated by experienced diploma qualification educator."}}},{name:"services",url:"/services",templateUrl:"scripts/components/services/services.html",data:{authorizedRoles:[a.all],page:{title:"Family Day Care, Before/After school care, Vocation care",description:"We provide Family Day Care, Before/After school care and Vocation care."}}},{name:"philosophy",url:"/philosophy",templateUrl:"scripts/components/philosophy/philosophy.html",data:{authorizedRoles:[a.all],page:{title:"Unlocking child's full potential",description:"We believe early learning is the key to unlocking a child's full potential."}}},{name:"photos",url:"/photos",templateUrl:"scripts/components/photos/photos.html",controller:"PhotosController as photos",data:{authorizedRoles:[a.all],page:{title:"Playroom, Creative corner, Art and craft and outside playground",description:"Our facilities are Playroom, Creative corner, Art and craft and outside playground."}}},{name:"contact",url:"/contact",templateUrl:"scripts/components/contact/contact.html",controller:"ContactController as contact",data:{authorizedRoles:[a.all],page:{title:"Near Rockdale and Banksia train station",description:"Our location is near Rockdale and Banksia train station."}}},{name:"dashboard",url:"/dashboard",templateUrl:"scripts/components/dashboard/dashboard.html",controller:"DashboardController as dashboard",data:{authorizedRoles:[a.admin],page:{title:"Admin Dashboard",description:""}}},{name:"login",url:"/login",templateUrl:"scripts/components/login/login.html",controller:"LoginController as login",data:{authorizedRoles:[a.all],page:{title:"Login",description:"admin user authentication"}}},{name:"signout",url:"/signout",templateUrl:"scripts/components/signout/signout.html",data:{authorizedRoles:[a.all],page:{title:"Signout",description:"User is signed out"}}},{name:"user-profile",url:"/user-profile",templateUrl:"scripts/components/user-profile/user-profile.html",controller:"UserProfileController as userProfile",data:{authorizedRoles:[a.all],page:{title:"User Profile Details",description:"View/Edit user profile"}}}]},c={USER_ROLES:a,STATES:b},angular.module("pineappleclub.authorisation-constant",[]).constant("AUTHORISATION",c)}(),function(){"use strict";var a={XS:"xs",S:"sm",M:"md",L:"lg"};angular.module("pineappleclub.device-sizes-constant",[]).constant("DEVICE_SIZES",a)}(),function(){"use strict";var a={empty:""};angular.module("pineappleclub.string-constant",[]).constant("STRING",a)}(),function(){"use strict";var a={show:"show",edit:"edit"};angular.module("pineappleclub.view-modes-constant",[]).constant("VIEW_MODES",a)}(),function(){"use strict";function a(a){var b={link:function(b,c,d){$(c).height($(a).height())}};return{restrict:"A",link:function(a,c,d){b.link(a,c,d)}}}angular.module("pineappleclub.device-height-directive",["pineappleclub.export-service"]).directive("pcdDeviceHeight",a),a.$inject=["ExportService"]}(),function(){"use strict";function a(a){return{restrict:"E",transclude:!0,scope:{updateFn:"&"},link:function(b,c,d){var e=function(){var a=$(c),b=a.find(".view-detail").find("[data-mode]");return b},f=function(a){return function(){var d=$(c),f=e(),g=d.find(".view-detail").find("[data-mode='"+a+"']");$(f).hide(),$(g).show(),b.mode=a}},g=function(){var a=$(c),d=e(),f=a.find(".view-detail").find("[default]");d.hide(),f.show(),b.mode=$(f).attr("data-mode")};b.edit=f(a.edit),b.cancel=f(a.show),g()},templateUrl:"scripts/directives/entity-detail-container/entity-detail-container.html"}}angular.module("pineappleclub.entity-detail-container",["pineappleclub.view-modes-constant"]).directive("pcdEntityDetailContainer",a),a.$inject=["VIEW_MODES"]}(),function(){"use strict";function a(){return{restrict:"E",transclude:!0,scope:{},link:function(a,b,c){a.expandable="/images/expand.png",b.find(".exp-header").html(c.header),a.toggle=function(){var c=$(b),d=c.find(".collapse-group").find(".collapse");a.expandable=d.hasClass("collapse in")?"/images/expand.png":"/images/collapse.png",d.collapse("toggle")}},templateUrl:"scripts/directives/expandable-container/expandable-container.html"}}angular.module("pineappleclub.expandable-container",[]).directive("pcdExpandableContainer",a),a.$inject=[]}(),function(){"use strict";function a(a){var b={link:function(b,c,d){var e,f,g=a.companyInfo;f={zoom:17,center:new google.maps.LatLng(g.location.lat,g.location.lng)},e=new google.maps.Map($(c).get(0),f)}};return{restrict:"A",link:function(a,c,d){b.link(a,c,d)}}}angular.module("pineappleclub.google-map-directive",[]).directive("pcdGoogleMap",a),a.$inject=["AppConfigurationService"]}(),function(){"use strict";function a(a){var b={link:function(a,b,c){$(b).attr("data-userid",c.userid),$(b).plusGallery()}};return{restrict:"A",link:function(a,c,d){b.link(a,c,d)}}}angular.module("pineappleclub.plus-gallery-directive",[]).directive("pcdPlusGallery",a),a.$inject=[]}(),function(){"use strict";function a(){var a={project:{name:"Pineapple Club Website"},page:{titlePrefix:"Pineapple Club"},googlePlusUserId:"102015599606810374225",companyInfo:{name:"Pineapple Club Family Day Care",location:{lat:-33.945967,lng:151.137092},contact:{phone:"(02) 8041 8101",mobile:"04 6625 0622",email:"mui@pineappleclub.com.au"}},progress:{color:"#1d9ad9"}};return a}angular.module("pineappleclub.app-configuration-service",[]).factory("AppConfigurationService",a),a.$inject=[]}(),function(){"use strict";function a(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}}}angular.module("pineappleclub.auth-interceptor-service",["pineappleclub.auth-events-constant"]).factory("AuthInterceptor",a),a.$inject=["$rootScope","$q","AUTH_EVENTS"]}(),function(){"use strict";function a(a,b){function c(a){localStorage.setItem("user",JSON.stringify(a))}function d(a){return b.post("/api/login",a).then(function(a){var b=a.data;return b.success&&c(b.user),b})}function e(){return b.post("/api/logout").then(function(a){var b=a.data;return b.success&&localStorage.removeItem("user"),b})}function f(){return localStorage.removeItem("user"),b.post("/api/authenticated").then(function(a){var b=a.data;return b.success&&c(b.user),b})}function g(){return!!j.getCurrentUser()}function h(a){var b=j.getCurrentUser();return angular.isArray(a)||(a=[a]),j.isAuthenticated()&&-1!==a.indexOf(b.userRole)}function i(){var a=localStorage.getItem("user");return a?JSON.parse(a):null}var j={login:d,logout:e,authenticated:f,isAuthenticated:g,isAuthorized:h,getCurrentUser:i};return j}angular.module("pineappleclub.auth-service",["ngCookies"]).factory("AuthService",a),a.$inject=["$cookieStore","$http"]}(),function(){"use strict";function a(a,b){function c(){a.config.initializeAdapterInstance("dataService","mongo",!0),f("0"),h=new a.DataService({serviceName:"api"})}function d(){return i||(i=k.newManager())}function e(){var a=b.getMetadataStore();return a.addDataService(h),a}function f(b){var c=a.config.getAdapterInstance("ajax");c.defaultSettings={headers:{"X-UserSessionId":b},timeout:1e4}}function g(){return new a.EntityManager({dataService:h,metadataStore:j})}var h,i,j,k;return c(),j=e(),k={getManager:d,newManager:g}}angular.module("pineappleclub.entity-manager-factory",["pineappleclub.model"]).factory("EntityManagerFactory",a),a.$inject=["breeze","model"]}(),function(){"use strict";function a(){return window}angular.module("pineappleclub.export-service",[]).factory("ExportService",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(){var b=c(),e=new a.MetadataStore({namingConvention:b});return d(e),e}function c(){var b=new a.NamingConvention({serverPropertyNameToClient:function(a){switch(a){case"_id":return"id";default:return a}},clientPropertyNameToServer:function(a){switch(a){case"id":return"_id";default:return a}}});return b}function d(b){function c(){g({name:"User",dataProperties:{id:{type:i},firstname:{max:100},lastname:{max:100}}})}var d=a.AutoGeneratedKeyType.None,e="Zza.Model",f=new a.config.MetadataHelper(e,d),g=function(a){f.addTypeToStore(b,a)},h=a.DataType,i=(h.Boolean,h.DateTime,h.Decimal,h.Int32,h.MongoObjectId);c()}return{createMetadataStore:b}}angular.module("pineappleclub.meta-data",[]).factory("metadata",a),a.$inject=["breeze"]}(),function(){"use strict";function a(a,b){function c(){}function d(){function a(){e("User",c)}var d=b.createMetadataStore(),e=d.registerEntityTypeCtor.bind(d);return a(),d}var e={getMetadataStore:d,User:c};return e}angular.module("pineappleclub.model",["pineappleclub.meta-data"]).factory("model",a),a.$inject=["breeze","metadata"]}(),function(){"use strict";function a(a){var b={home:{name:"home",display:"Home",path:"/"},services:{name:"services",display:"Services",path:"/services"},photos:{name:"photos",display:"Photos",path:"/photos"},philosophy:{name:"philosophy",display:"Philosophy",path:"/philosophy"},contact:{name:"contact",display:"Contact",path:"/contact"}},c={items:b,pages:{main:{name:"main",display:"Menu",items:[b.home,b.services,b.photos,b.philosophy,b.contact]},about:{name:"about",display:"About",items:[b.contact,b.philosophy]}}};return c}angular.module("pineappleclub.navigator-service",["pineappleclub.app-configuration-service"]).factory("NavigatorService",a),a.$inject=["AppConfigurationService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(g){g[0]===e.USER_ROLES.all||b.isAuthorized(g)?f.start():(c.changeState("login"),a.$broadcast(b.isAuthenticated()?d.notAuthorized:d.notAuthenticated))}var h={change:g};return h}angular.module("pineappleclub.state-change-service",["ngProgress","pineappleclub.state-service","pineappleclub.auth-service","pineappleclub.auth-events-constant","pineappleclub.authorisation-constant"]).factory("StateChangeService",a),a.$inject=["$rootScope","AuthService","StateService","AUTH_EVENTS","AUTHORISATION","ngProgress"]}(),function(){"use strict";function a(a,b){function c(c){var d=_.first(_.where(b.STATES.states,{name:c}));a.path(d.url)}var d={changeState:c};return d}angular.module("pineappleclub.state-service",["pineappleclub.authorisation-constant"]).factory("StateService",a),a.$inject=["$location","AUTHORISATION"]}(),function(){"use strict";function a(a,b){function c(){return breeze.EntityQuery.from("User").where("id","eq","54603b40496fba9c2301f5db").using(f).execute().then(function(a){return a.results[0]})["catch"](function(a){var b;b=1})}function d(){return f.saveChanges().then(function(a){var b;b=1})["catch"](function(a){var b;b=1})}var e,f=a.getManager(),g={getCurrentUser:function(){return e},setCurrentUser:function(a){e=a},getUsers:c,save:d};return g}angular.module("pineappleclub.user-service",["pineappleclub.entity-manager-factory","pineappleclub.model"]).factory("UserService",a),a.$inject=["EntityManagerFactory","model"]}(),function(){"use strict";function a(){function a(a){return $(".device-"+a).is(":visible")}var b={device:{isBreakpoint:a}};return b}angular.module("pineappleclub.util-service",[]).factory("UtilService",a),a.$inject=[]}();